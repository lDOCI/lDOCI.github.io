<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>FlashForge AD5M ‚Äî –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <style>
    body {
      background: linear-gradient(to bottom right, #111, #1a1a1a);
      color: #eee;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding-top: 4.5rem;
    }
    h2, h3 { color: #fff; }
    .card {
      background-color: #1f1f1f;
      border: 1px solid #333;
      color: #ccc;
      transition: 0.3s;
    }
    .card:hover {
      background-color: #2a2a2a;
    }
    .search-input {
      background-color: #222;
      border: 1px solid #444;
      color: #eee;
    }
    .printer-img {
      max-width: 300px;
      filter: drop-shadow(0 0 20px #000);
    }
    .nav-link { color: #ccc !important; }
    .nav-link:hover { color: #fff !important; }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
    <div class="container">
      <a class="navbar-brand fw-bold" href="#">AD5M</a>
      <input id="search" class="form-control w-50 mx-3 search-input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ..." />
    </div>
  </nav>

  <div class="container my-4" id="content"></div>

  <script>
    async function loadData() {
      try {
        const response = await fetch('flashforge_full_baza_combined.json');
        const json = await response.json();

        const content = document.getElementById('content');
        const searchInput = document.getElementById('search');

        function renderSections(data) {
          content.innerHTML = '';
          data.forEach(section => {
            const sectionBlock = document.createElement('div');
            sectionBlock.className = 'mb-5';

            const heading = document.createElement('h2');
            heading.textContent = section.category;
            sectionBlock.appendChild(heading);

            section.items.forEach(item => {
              const card = document.createElement('div');
              card.className = 'card mb-3 p-3';

              const title = document.createElement('h5');
              title.textContent = item.title || '(–±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞)';
              card.appendChild(title);

              const description = document.createElement('p');
              description.textContent = item.description || '(–±–µ–∑ –æ–ø–∏—Å–∞–Ω–∏—è)';
              card.appendChild(description);

              if (item.link) {
                const link = document.createElement('a');
                link.href = item.link;
                link.className = 'text-info';
                link.target = '_blank';
                link.textContent = 'üîó –°—Å—ã–ª–∫–∞';
                card.appendChild(link);
              }

              if (item.code) {
                const code = document.createElement('pre');
                code.textContent = item.code;
                code.style.background = '#000';
                code.style.padding = '0.5rem';
                code.style.color = '#0f0';
                card.appendChild(code);
              }

              sectionBlock.appendChild(card);
            });

            content.appendChild(sectionBlock);
          });
        }

        renderSections(json.sections);

        searchInput.addEventListener('input', e => {
          const q = e.target.value.toLowerCase();
          const filtered = json.sections.map(sec => ({
            ...sec,
            items: sec.items.filter(it =>
              (it.title || '').toLowerCase().includes(q) ||
              (it.description || '').toLowerCase().includes(q)
            )
          })).filter(sec => sec.items.length > 0);
          renderSections(filtered);
        });

      } catch (err) {
        document.getElementById('content').innerHTML = `<div class="alert alert-danger">–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JSON: ${err.message}</div>`;
        console.error(err);
      }
    }

    loadData();
  </script>
</body>
</html>