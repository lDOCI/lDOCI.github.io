<!DOCTYPE html>
<html lang="ru" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Flashforge AD5M Wiki</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                    colors: { 
                        bg: { main: 'var(--bg-main)', card: 'var(--bg-card)', border: 'var(--bg-border)', hover: 'var(--bg-hover)' }, 
                        brand: { DEFAULT: 'var(--brand-color)', glow: 'var(--brand-glow)' } 
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            --brand-color: #f97316;
            --brand-glow: rgba(249, 115, 22, 0.15);
            --bg-main: #0a0a0a;
            --bg-card: #121212;
            --bg-border: #262626;
            --bg-hover: #1f1f1f;
            --text-main: #e5e5e5;
            --text-muted: #a1a1aa;
        }
        html:not(.dark) {
            --bg-main: #f3f4f6;
            --bg-card: #ffffff;
            --bg-border: #e5e7eb;
            --bg-hover: #f9fafb;
            --text-main: #1f2937;
            --text-muted: #6b7280;
        }
        body { background-color: var(--bg-main); color: var(--text-main); transition: background 0.3s, color 0.3s; }
        
        .prose { color: var(--text-main); }
        .prose strong, .prose b { color: inherit; font-weight: 700; }
        .prose ul { list-style-type: disc; padding-left: 1.2rem; margin: 0.5rem 0; }
        .prose ol { list-style-type: decimal; padding-left: 1.2rem; margin: 0.5rem 0; }
        .prose code { background: var(--bg-hover); padding: 2px 5px; border-radius: 4px; font-family: 'JetBrains Mono'; font-size: 0.85em; color: var(--brand-color); border: 1px solid var(--bg-border); }
        .prose p { margin-bottom: 0.8em; }
        .prose a { color: var(--brand-color); text-decoration: underline; }
        .prose img { border-radius: 8px; max-width: 100%; margin: 10px 0; }

        /* === –°–ü–û–ô–õ–ï–†–´ (–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ) === */
        .prose details { border: 1px solid var(--bg-border); border-radius: 8px; margin: 15px 0; overflow: hidden; background: var(--bg-card); }
        .prose summary { cursor: pointer; font-weight: bold; padding: 12px 15px; display: flex; align-items: center; justify-content: space-between; user-select: none; }
        .prose summary::after { content: '\f078'; font-family: 'Font Awesome 6 Free'; font-weight: 900; font-size: 12px; transition: 0.3s; }
        .prose details[open] summary::after { transform: rotate(180deg); }
        .prose .details-content { padding: 15px; border-top: 1px solid var(--bg-border); }

        /* üü† 5M */
        .prose details.block-5m { border: 2px solid #f97316; }
        .prose details.block-5m summary { background: #f97316; color: white; }
        .prose details.block-5m summary:hover { background: #e67e22; }
        
        /* üîµ 5X */
        .prose details.block-5x { border: 2px solid #3b82f6; }
        .prose details.block-5x summary { background: #3b82f6; color: white; }
        .prose details.block-5x summary:hover { background: #2563eb; }

        /* –ü–û–î–°–í–ï–¢–ö–ê –ü–û–ò–°–ö–ê */
        mark { background-color: #facc15; color: black; padding: 0 2px; border-radius: 2px; }

        /* üéì INFO BOX */
        .info-box { border-left: 4px solid #2ecc71; background: rgba(46, 204, 113, 0.1); padding: 15px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .info-box::before { content: 'üéì –ü–û–õ–ï–ó–ù–û –ó–ù–ê–¢–¨:'; display: block; font-weight: bold; color: #2ecc71; margin-bottom: 5px; font-size: 12px; letter-spacing: 1px; }

        .file-card { display: inline-flex; align-items: center; gap: 15px; background: var(--bg-card); border: 1px solid var(--bg-border); border-left: 5px solid var(--brand-color); padding: 12px 20px; margin: 10px 0; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); color: var(--text-main); width: auto; max-width: 100%; }
        .file-icon { color: var(--brand-color); font-size: 24px; }
        .file-name { font-weight: bold; font-size: 15px; margin-right: 15px; }
        .file-download-btn { background: var(--brand-color); color: white !important; text-decoration: none !important; padding: 8px 16px; border-radius: 20px; font-size: 13px; font-weight: bold; display: flex; align-items: center; gap: 5px; transition: 0.2s; }
        .file-download-btn:hover { filter: brightness(1.1); transform: translateY(-1px); }

        details.group > summary { list-style: none; }
        details.group > summary::-webkit-details-marker { display: none; }

        @keyframes target-fade { 0% { border-color: var(--brand-color); box-shadow: 0 0 30px var(--brand-glow); } 100% { border-color: var(--bg-border); box-shadow: none; } }
        .target-active { animation: target-fade 2s ease-out forwards; open: true; }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-track { background: transparent; }
    </style>
</head>
<body class="antialiased h-screen overflow-hidden flex flex-col md:flex-row">

<div id="app" class="w-full h-full flex flex-col md:flex-row">
    <div class="md:hidden h-16 border-b border-bg-border bg-bg-main/80 backdrop-blur flex items-center justify-between px-4 z-50 shrink-0">
        <div class="flex items-center gap-2 font-bold text-lg"><div class="w-6 h-6 bg-brand rounded flex items-center justify-center text-black text-xs">5M</div><span>Wiki</span></div>
        <button @click="mobileMenu = !mobileMenu" class="p-2 text-zinc-400 hover:text-brand"><i :data-lucide="mobileMenu ? 'x' : 'menu'" class="w-6 h-6"></i></button>
    </div>

    <aside :class="['fixed inset-y-0 left-0 w-72 bg-bg-card border-r border-bg-border z-40 transform transition-transform duration-300 md:relative md:translate-x-0 flex flex-col', mobileMenu ? 'translate-x-0' : '-translate-x-full']">
        <div class="hidden md:flex h-16 items-center px-6 border-b border-bg-border gap-3 justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 bg-brand rounded-lg flex items-center justify-center text-black font-bold shadow-[0_0_15px_var(--brand-glow)]">5M</div>
                <div><h1 class="font-bold leading-none">AD5M Wiki</h1><span class="text-[10px] text-zinc-500 font-mono">Community Base</span></div>
            </div>
            <button @click="showSettings = true" class="text-zinc-500 hover:text-brand transition"><i data-lucide="settings" class="w-5 h-5"></i></button>
        </div>
        
        <div class="p-4">
            <div class="relative group">
                <i data-lucide="search" class="absolute left-3 top-1/2 -translate-y-1/2 text-zinc-500 w-4 h-4 group-focus-within:text-brand transition"></i>
                <input type="text" v-model="search" placeholder="–ü–æ–∏—Å–∫..." class="w-full bg-bg-main border border-bg-border rounded-lg py-2.5 pl-10 pr-3 text-sm text-main placeholder-zinc-600 focus:border-brand focus:ring-1 focus:ring-brand outline-none transition-all">
            </div>
        </div>

        <nav class="flex-1 overflow-y-auto px-3 space-y-1 py-2">
            <div v-for="cat in categories" :key="cat.id">
                <button @click="setCategory(cat.id)" :class="['w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm font-medium transition-all', currentTab === cat.id ? 'bg-brand/10 text-brand border border-brand/20' : 'text-zinc-500 hover:bg-bg-hover hover:text-main border border-transparent']">
                    <div class="flex items-center gap-3"><i :data-lucide="cat.icon" class="w-4 h-4"></i>{{ cat.name }}</div>
                    <span class="text-xs text-zinc-500 bg-bg-main px-1.5 py-0.5 rounded">{{ getCount(cat.id) }}</span>
                </button>
            </div>
        </nav>
        <div class="p-4 border-t border-bg-border text-xs text-zinc-500 text-center">Wiki v2.0</div>
    </aside>

    <div v-if="mobileMenu" @click="mobileMenu = false" class="fixed inset-0 bg-black/80 z-30 md:hidden backdrop-blur-sm"></div>

    <main class="flex-1 h-full overflow-y-auto scroll-smooth relative" ref="mainScroll">
        <div class="max-w-5xl mx-auto px-4 py-8 md:px-8 md:py-12">
            <div class="mb-8 flex items-end justify-between border-b border-bg-border pb-4">
                <div><h2 class="text-3xl font-bold text-main">{{ getCategoryName(currentTab) }}</h2><p class="text-zinc-500 mt-1 text-sm">–†–µ—à–µ–Ω–∏–π: {{ filteredNewPosts.length + filteredOldPosts.length }}</p></div>
            </div>

            <div v-if="loading" class="flex flex-col items-center justify-center py-20">
                <div class="w-10 h-10 border-4 border-bg-border border-t-brand rounded-full animate-spin mb-4"></div><p class="text-zinc-500 animate-pulse">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
            </div>

            <div v-else>
                <!-- NEW POSTS -->
                <div v-if="filteredNewPosts.length > 0" class="mb-10 grid grid-cols-1 gap-4">
                    <div class="flex items-center gap-2 mb-2 text-brand font-bold uppercase text-xs tracking-wider"><i data-lucide="sparkles" class="w-4 h-4"></i>–ê–∫—Ç—É–∞–ª—å–Ω–æ–µ</div>
                    
                    <details v-for="item in filteredNewPosts" :key="item.id" :id="'post-' + item.id" class="group bg-bg-card border border-brand/40 shadow-[0_0_20px_var(--brand-glow)] rounded-xl overflow-hidden transition-all duration-300 scroll-mt-20">
                        <summary class="flex flex-wrap items-center justify-between gap-4 p-6 cursor-pointer hover:bg-bg-hover transition-colors">
                            <div class="flex-1">
                                <div class="flex flex-wrap gap-2 mb-2">
                                    <span class="px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider border bg-brand text-white border-brand">VERIFIED</span>
                                    <span v-for="tag in getTags(item)" :key="tag" class="px-2 py-0.5 rounded text-[10px] text-zinc-400 bg-bg-main border border-bg-border">#{{ tag }}</span>
                                </div>
                                <h3 class="text-lg font-bold text-main flex gap-2"><i data-lucide="chevron-right" class="w-5 h-5 text-brand group-open:rotate-90 transition-transform"></i> <span v-html="highlight(item.title)"></span></h3>
                            </div>
                            <div class="flex items-center gap-3">
                                <span class="text-[10px] text-zinc-500 font-mono hidden sm:block">{{ item.date }}</span>
                                <button @click.stop="copyLink(item.id)" class="text-zinc-500 hover:text-brand p-1"><i data-lucide="link" class="w-4 h-4"></i></button>
                            </div>
                        </summary>
                        <div class="px-6 pb-6 pt-2 border-t border-zinc-800/50">
                             <div class="pl-4 md:pl-8 border-l border-zinc-700/50">
                                <div class="prose text-sm leading-relaxed max-w-none" v-html="getProcessedContent(item)"></div>
                             </div>
                        </div>
                    </details>
                </div>

                <!-- OLD POSTS -->
                <div v-if="filteredOldPosts.length > 0">
                    <div class="relative py-8 flex items-center justify-center"><div class="absolute inset-x-0 h-px bg-bg-border"></div><span class="relative bg-bg-main px-4 text-xs text-zinc-500 font-mono uppercase">–ê—Ä—Ö–∏–≤</span></div>
                     <div class="grid grid-cols-1 gap-4">
                        <details v-for="item in filteredOldPosts" :key="item.id" :id="'post-' + item.id" class="group bg-bg-card border border-bg-border rounded-xl overflow-hidden transition-all scroll-mt-20">
                            <summary class="flex flex-wrap items-center justify-between gap-4 p-6 cursor-pointer hover:bg-bg-hover">
                                <div class="flex-1">
                                    <div class="flex flex-wrap gap-2 mb-2">
                                         <span v-for="badge in item.badges" :key="badge.text" :class="['px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider border', getBadgeColor(badge.color)]">{{ badge.text }}</span>
                                         <span v-for="tag in getTags(item)" :key="tag" class="px-2 py-0.5 rounded text-[10px] text-zinc-400 bg-bg-main border border-bg-border">#{{ tag }}</span>
                                    </div>
                                    <h3 class="text-lg font-bold text-main flex gap-2"><i data-lucide="chevron-right" class="w-5 h-5 text-zinc-500 group-open:rotate-90 transition-transform"></i> <span v-html="highlight(item.problem)"></span></h3>
                                </div>
                                <button @click.stop="copyLink(item.id)" class="text-zinc-500 hover:text-brand p-1"><i data-lucide="link" class="w-4 h-4"></i></button>
                            </summary>
                            <div class="px-6 pb-6 pt-2 border-t border-zinc-800/50">
                                <div class="pl-4 md:pl-8 border-l border-zinc-700/50">
                                    <div class="prose text-sm leading-relaxed max-w-none" v-html="highlight(renderMarkdown(item.solution))"></div>
                                </div>
                            </div>
                        </details>
                    </div>
                </div>
            </div>
            <div class="h-12"></div>
        </div>
    </main>

    <div v-if="showSettings" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4" @click.self="showSettings = false">
        <div class="bg-bg-card border border-bg-border rounded-xl p-6 w-full max-w-sm shadow-2xl">
            <h3 class="text-xl font-bold text-main mb-4 flex items-center gap-2"><i data-lucide="palette" class="w-5 h-5 text-brand"></i> –í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h3>
            <div class="mb-6"><label class="block text-xs uppercase text-zinc-500 font-bold mb-3">–¶–≤–µ—Ç –ê–∫—Ü–µ–Ω—Ç–∞</label><div class="flex gap-3"><button v-for="c in colors" :key="c.hex" @click="setColor(c.hex)" class="w-8 h-8 rounded-full border-2 transition-transform hover:scale-110" :style="{ backgroundColor: c.hex, borderColor: themeColor === c.hex ? 'white' : 'transparent' }"></button></div></div>
            <div class="mb-6"><label class="flex items-center justify-between cursor-pointer"><span class="text-main font-medium">–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞</span><div class="relative"><input type="checkbox" v-model="isLight" class="sr-only peer" @change="toggleTheme"><div class="w-11 h-6 bg-zinc-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-brand"></div></div></label></div>
            <button @click="showSettings = false" class="w-full bg-bg-hover hover:bg-zinc-700 text-main font-bold py-2 rounded-lg transition">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>

    <div v-show="toast.show" class="fixed bottom-6 right-6 z-50 bg-brand text-white font-bold px-4 py-3 rounded-lg shadow-xl flex items-center gap-3 animate-bounce"><i data-lucide="check" class="w-5 h-5"></i> –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!</div>
</div>

<script>
    const { createApp } = Vue;
    createApp({
        data() {
            return {
                loading: true, newPosts: [], oldPosts: [], search: '', currentTab: 'all', mobileMenu: false, showSettings: false,
                isLight: false, themeColor: '#f97316', toast: { show: false },
                colors: [ { hex: '#f97316' }, { hex: '#3b82f6' }, { hex: '#2ecc71' }, { hex: '#a855f7' }, { hex: '#ef4444' } ],
                categories: [ { id: 'all', name: '–í—Å–µ —Å—Ç–∞—Ç—å–∏', icon: 'layers' }, { id: 'start', name: '–ù–æ–≤–∏—á–∫–∞–º', icon: 'sprout' }, { id: 'fix', name: '–†–µ–º–æ–Ω—Ç –∏ –û—à–∏–±–∫–∏', icon: 'wrench' }, { id: 'mod', name: '–ú–æ–¥—ã –∏ –¢—é–Ω–∏–Ω–≥', icon: 'cpu' }, { id: 'models', name: '3D –ú–æ–¥–µ–ª–∏', icon: 'box' } ]
            }
        },
        computed: { filteredNewPosts() { return this.filterList(this.newPosts, true); }, filteredOldPosts() { return this.filterList(this.oldPosts, false); } },
        watch: {
            // –ö–û–ì–î–ê –ú–ï–ù–Ø–ï–¢–°–Ø –ü–û–ò–°–ö - –†–ê–°–ö–†–´–í–ê–ï–ú –í–ù–£–¢–†–ï–ù–ù–ò–ï –°–ü–û–ô–õ–ï–†–´
            search(val) {
                if(!val) return;
                this.$nextTick(() => {
                    document.querySelectorAll('.prose details').forEach(el => {
                        if (el.textContent.toLowerCase().includes(val.toLowerCase())) {
                            el.setAttribute('open', 'true');
                        }
                    });
                });
            }
        },
        methods: {
            highlight(text) {
                if (!this.search || !text) return text;
                const q = this.search.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                return text.replace(new RegExp(`(${q})`, 'gi'), '<mark>$1</mark>');
            },
            getProcessedContent(item) {
                let html = item.content;
                // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ HTML –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ø—Ä–æ—Å—Ç–∞—è)
                if(this.search) {
                    const q = this.search.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    // –û—Å—Ç–æ—Ä–æ–∂–Ω–æ —Å –∑–∞–º–µ–Ω–æ–π –≤–Ω—É—Ç—Ä–∏ HTML —Ç–µ–≥–æ–≤, –Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
                    // –õ—É—á—à–µ –±—ã–ª–æ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å NodeIterator, –Ω–æ –∑–¥–µ—Å—å –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ä–µ–≥–µ–∫—Å–ø
                    // –ó–∞–º–µ–Ω—è–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç –≤–Ω–µ —Ç–µ–≥–æ–≤ (–æ—á–µ–Ω—å —É–ø—Ä–æ—â–µ–Ω–Ω–æ)
                    // –î–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—Å—Ç–æ –≤–µ—Ä–Ω–µ–º html, –∞ —Ä–∞—Å–∫—Ä—ã—Ç–∏–µ —Å–ø–æ–π–ª–µ—Ä–∞ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
                    return html; 
                }
                return html;
            },
            getTags(item) { const t = item.tags; if (!t) return []; if (typeof t === 'string') return [t.replace(/^#/, '')]; return t; },
            filterList(list, isNew) {
                let result = list;
                if (this.currentTab !== 'all') {
                    result = result.filter(item => {
                        if (isNew) {
                            const tags = Array.isArray(item.tags) ? item.tags.join(' ').toLowerCase() : (item.tags || '').toLowerCase();
                            if (this.currentTab === 'mod' && (tags.includes('mod') || tags.includes('upgrade'))) return true;
                            if (this.currentTab === 'fix' && (tags.includes('fix') || tags.includes('error'))) return true;
                            if (this.currentTab === 'start' && tags.includes('start')) return true;
                            if (this.currentTab === 'models' && (tags.includes('stl') || tags.includes('3d'))) return true;
                            return false; 
                        } else {
                            const c = (item.category || 'info').toLowerCase();
                            if (this.currentTab === 'mod' && (c.includes('klipper') || c.includes('z-mod'))) return true;
                            if (this.currentTab === 'fix' && (c.includes('error') || c.includes('quality'))) return true;
                            return c.includes(this.currentTab);
                        }
                    });
                }
                if (this.search) {
                    const q = this.search.toLowerCase();
                    result = result.filter(a => {
                        const title = isNew ? a.title : a.problem;
                        const content = isNew ? a.content : a.solution;
                        const tags = Array.isArray(a.tags) ? a.tags.join(' ') : (a.tags || '');
                        return (title && title.toLowerCase().includes(q)) || (content && content.toLowerCase().includes(q)) || (tags && tags.toLowerCase().includes(q));
                    });
                }
                return result;
            },
            async loadData() {
                try {
                    const ts = Date.now();
                    try { const oldRes = await fetch('db.json?v=' + ts); if (oldRes.ok) this.oldPosts = await oldRes.json(); } catch(e) {}
                    try { const newRes = await fetch('new_posts.json?v=' + ts); if (newRes.ok) this.newPosts = await newRes.json(); } catch(e) {}
                    this.$nextTick(() => { this.checkHash(); lucide.createIcons(); });
                } catch (e) { console.error(e); } finally { this.loading = false; }
            },
            renderMarkdown(text) { return text ? marked.parse(text) : ''; },
            setCategory(id) { this.currentTab = id; this.mobileMenu = false; this.$refs.mainScroll.scrollTop = 0; },
            getCategoryName(id) { const cat = this.categories.find(c => c.id === id); return cat ? cat.name : '–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π'; },
            getCount(id) { if (id === 'all') return this.newPosts.length + this.oldPosts.length; return 'Auto'; },
            getBadgeColor(color) { const map = { 'blue': 'bg-blue-500/10 text-blue-400 border-blue-500/20', 'purple': 'bg-purple-500/10 text-purple-400 border-purple-500/20', 'orange': 'bg-orange-500/10 text-orange-400 border-orange-500/20', 'red': 'bg-red-500/10 text-red-400 border-red-500/20', 'green': 'bg-green-500/10 text-green-400 border-green-500/20' }; return map[color] || 'bg-zinc-800 text-zinc-400 border-zinc-700'; },
            copyLink(id) {
                const url = `${window.location.origin}${window.location.pathname}#post-${id}`;
                navigator.clipboard.writeText(url); history.pushState(null, null, `#post-${id}`);
                this.toast.show = true; setTimeout(() => this.toast.show = false, 2000);
            },
            checkHash() {
                const hash = window.location.hash;
                if (hash && hash.includes('post-')) {
                    const id = hash.replace('#post-', ''); this.currentTab = 'all';
                    this.$nextTick(() => { const el = document.getElementById('post-' + id); if (el) { el.setAttribute('open', 'true'); el.scrollIntoView({ behavior: 'smooth', block: 'center' }); el.classList.add('target-active'); } });
                }
            },
            setColor(hex) {
                this.themeColor = hex;
                document.documentElement.style.setProperty('--brand-color', hex);
                document.documentElement.style.setProperty('--brand-glow', hex + '26');
                localStorage.setItem('themeColor', hex);
            },
            toggleTheme() {
                if(this.isLight) document.documentElement.classList.remove('dark');
                else document.documentElement.classList.add('dark');
                localStorage.setItem('themeLight', this.isLight);
            },
            initTheme() {
                const c = localStorage.getItem('themeColor');
                if(c) this.setColor(c);
                const l = localStorage.getItem('themeLight');
                if(l === 'true') { this.isLight = true; document.documentElement.classList.remove('dark'); }
                else { this.isLight = false; document.documentElement.classList.add('dark'); }
            }
        },
        mounted() { this.loadData(); this.initTheme(); lucide.createIcons(); },
        updated() { lucide.createIcons(); }
    }).mount('#app');
</script>
</body>
</html>
