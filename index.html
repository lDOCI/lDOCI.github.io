<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</title>
    <style>
        :root {
            --bg-color: #f5f5f5;
            --card-color: #ffffff;
            --text-color: #333333;
            --border-color: #e0e0e0;
            --accent-color: #4285f4;
            --hover-color: #f1f1f1;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
        }

        .search-container {
            margin-bottom: 30px;
            position: relative;
        }

        #search {
            width: 100%;
            padding: 12px 20px;
            font-size: 16px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            outline: none;
        }

        #search:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.2);
        }

        .category {
            margin-bottom: 30px;
        }

        .category-title {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--border-color);
        }

        .entry {
            background-color: var(--card-color);
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 15px;
            overflow: hidden;
        }

        .entry-header {
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 500;
            transition: background-color 0.2s;
        }

        .entry-header:hover {
            background-color: var(--hover-color);
        }

        .entry-header::after {
            content: '+';
            font-size: 20px;
            transition: transform 0.3s;
        }

        .entry-header.active::after {
            transform: rotate(45deg);
        }

        .entry-content {
            padding: 0 20px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease;
        }

        .entry-content.active {
            padding: 0 20px 20px;
            max-height: 2000px;
        }

        .field {
            margin-bottom: 10px;
        }

        .field-title {
            font-weight: bold;
            margin-right: 5px;
        }

        .notes {
            font-style: italic;
            padding: 10px;
            background-color: rgba(255, 235, 59, 0.1);
            border-radius: 4px;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .no-results {
            text-align: center;
            padding: 30px;
            color: #666;
            display: none;
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }

            .entry-header {
                padding: 12px 15px;
            }

            .entry-content {
                padding: 0 15px;
            }

            .entry-content.active {
                padding: 0 15px 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</h1>
        
        <div class="search-container">
            <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º...">
        </div>
        
        <div id="content">
            <div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
        </div>
        
        <div class="no-results" id="noResults">
            –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å.
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ JSON —Ñ–∞–π–ª—ã –∏–∑ –ø–∞–ø–∫–∏ data
            async function loadData() {
                try {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∑–¥–µ—Å—å –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞
                    // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫
                    const files = [
                        '–ü—Ä–æ—à–∏–≤–∫–∞.json',
                        '–ú–µ—Ö–∞–Ω–∏–∫–∞.json'
                    ];
                    
                    const data = [];
                    
                    for (const file of files) {
                        try {
                            const response = await fetch(`data/${file}`);
                            if (!response.ok) continue;
                            const jsonData = await response.json();
                            data.push(jsonData);
                        } catch (e) {
                            console.error(`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞ ${file}:`, e);
                        }
                    }
                    
                    return data;
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:', error);
                    return [];
                }
            }
            
            // –†–µ–Ω–¥–µ—Ä–∏–º –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
            function renderData(data) {
                const contentDiv = document.getElementById('content');
                
                if (data.length === 0) {
                    contentDiv.innerHTML = '<div class="loading">–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ.</div>';
                    return;
                }
                
                contentDiv.innerHTML = '';
                
                data.forEach(category => {
                    if (!category.entries || category.entries.length === 0) return;
                    
                    const categoryDiv = document.createElement('div');
                    categoryDiv.className = 'category';
                    categoryDiv.dataset.category = category.category.toLowerCase();
                    
                    const categoryTitle = document.createElement('h2');
                    categoryTitle.className = 'category-title';
                    categoryTitle.textContent = category.category;
                    
                    categoryDiv.appendChild(categoryTitle);
                    
                    category.entries.forEach(entry => {
                        const entryDiv = document.createElement('div');
                        entryDiv.className = 'entry';
                        entryDiv.dataset.title = entry.title.toLowerCase();
                        entryDiv.dataset.problem = entry.problem.toLowerCase();
                        entryDiv.dataset.reason = (entry.reason || '').toLowerCase();
                        entryDiv.dataset.solution = (entry.solution || '').toLowerCase();
                        entryDiv.dataset.notes = (entry.notes || '').toLowerCase();
                        
                        const entryHeader = document.createElement('div');
                        entryHeader.className = 'entry-header';
                        entryHeader.textContent = entry.title;
                        
                        const entryContent = document.createElement('div');
                        entryContent.className = 'entry-content';
                        
                        // –ü—Ä–æ–±–ª–µ–º–∞
                        const problemDiv = document.createElement('div');
                        problemDiv.className = 'field';
                        problemDiv.innerHTML = `<span class="field-title">‚ùó –ü—Ä–æ–±–ª–µ–º–∞:</span> ${entry.problem}`;
                        entryContent.appendChild(problemDiv);
                        
                        // –ü—Ä–∏—á–∏–Ω–∞ (–µ—Å–ª–∏ –µ—Å—Ç—å)
                        if (entry.reason) {
                            const reasonDiv = document.createElement('div');
                            reasonDiv.className = 'field';
                            reasonDiv.innerHTML = `<span class="field-title">üîç –ü—Ä–∏—á–∏–Ω–∞:</span> ${entry.reason}`;
                            entryContent.appendChild(reasonDiv);
                        }
                        
                        // –†–µ—à–µ–Ω–∏–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)
                        if (entry.solution) {
                            const solutionDiv = document.createElement('div');
                            solutionDiv.className = 'field';
                            solutionDiv.innerHTML = `<span class="field-title">‚úÖ –†–µ—à–µ–Ω–∏–µ:</span> ${parseMarkdown(entry.solution)}`;
                            entryContent.appendChild(solutionDiv);
                        }
                        
                        // –ó–∞–º–µ—Ç–∫–∏ (–µ—Å–ª–∏ –µ—Å—Ç—å)
                        if (entry.notes) {
                            const notesDiv = document.createElement('div');
                            notesDiv.className = 'notes';
                            notesDiv.innerHTML = `üí° ${parseMarkdown(entry.notes)}`;
                            entryContent.appendChild(notesDiv);
                        }
                        
                        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞ –¥–ª—è –∞–∫–∫–æ—Ä–¥–µ–æ–Ω–∞
                        entryHeader.addEventListener('click', function() {
                            this.classList.toggle('active');
                            entryContent.classList.toggle('active');
                        });
                        
                        entryDiv.appendChild(entryHeader);
                        entryDiv.appendChild(entryContent);
                        categoryDiv.appendChild(entryDiv);
                    });
                    
                    contentDiv.appendChild(categoryDiv);
                });
            }
            
            // –ü—Ä–æ—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è Markdown –≤ HTML
            function parseMarkdown(text) {
                if (!text) return '';
                
                // –ñ–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç
                text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                
                // –°—Å—ã–ª–∫–∏
                text = text.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank">$1</a>');
                
                // –ü–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫
                text = text.replace(/\n/g, '<br>');
                
                return text;
            }
            
            // –ü–æ–∏—Å–∫
            function setupSearch() {
                const searchInput = document.getElementById('search');
                const noResultsDiv = document.getElementById('noResults');
                
                searchInput.addEventListener('input', function() {
                    const query = this.value.toLowerCase().trim();
                    const entries = document.querySelectorAll('.entry');
                    let hasVisible = false;
                    
                    if (query === '') {
                        entries.forEach(entry => {
                            entry.style.display = '';
                            const category = entry.closest('.category');
                            if (category) category.style.display = '';
                        });
                        noResultsDiv.style.display = 'none';
                        return;
                    }
                    
                    entries.forEach(entry => {
                        const matches = 
                            entry.dataset.title.includes(query) ||
                            entry.dataset.problem.includes(query) ||
                            entry.dataset.reason.includes(query) ||
                            entry.dataset.solution.includes(query) ||
                            entry.dataset.notes.includes(query);
                        
                        if (matches) {
                            entry.style.display = '';
                            hasVisible = true;
                            
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é
                            const category = entry.closest('.category');
                            if (category) category.style.display = '';
                        } else {
                            entry.style.display = 'none';
                        }
                    });
                    
                    // –°–∫—Ä—ã–≤–∞–µ–º –ø—É—Å—Ç—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
                    document.querySelectorAll('.category').forEach(category => {
                        const visibleEntries = category.querySelectorAll('.entry:not([style*="display: none"])');
                        if (visibleEntries.length === 0) {
                            category.style.display = 'none';
                        }
                    });
                    
                    noResultsDiv.style.display = hasVisible ? 'none' : 'block';
                });
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
            async function init() {
                const data = await loadData();
                renderData(data);
                setupSearch();
            }
            
            init();
        });
    </script>
</body>
</html>